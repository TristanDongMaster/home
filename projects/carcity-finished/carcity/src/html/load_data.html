<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta content="yes" name="apple-mobile-web-app-capable"/>
    <meta content="black" name="apple-mobile-web-app-status-bar-style"/>
    <meta content="telephone=no" name="format-detection"/>
    <title>下拉刷新</title>
    <link rel="stylesheet" href="../css/style-base.css?201512122302">
    <style>
        #scroller {
            position: absolute;
            z-index: 1;
            top: 0px;
            bottom: 0px;
            left: 0;
            width: 100%;
            background: #fff;
            overflow: hidden;
            min-height: 100px;
        }
        #scroller li {
            padding: 0 10px;
            height: 40px;
            line-height: 40px;
            border-bottom: 1px solid #ccc;
            border-top: 1px solid #fff;
            background-color: #fafafa;
            font-size: 14px;
        }
    </style>
</head>
<body onload="loaded()">
<ul >
    <li>111111111111</li>
    <li>2222222222</li>
    <li>333333333</li>
    <li>44444444444</li>
    <li>55555555555</li>
    <li>66666666666666</li>
    <li>777777777777</li>
    <li>888888888888888</li>
    <li>9999999999999</li>
</ul>
<ul >
    <li>111111111111</li>
    <li>2222222222</li>
    <li>333333333</li>
    <li>44444444444</li>
    <li>55555555555</li>
    <li>66666666666666</li>
    <li>777777777777</li>
    <li>888888888888888</li>
    <li>9999999999999</li>
</ul>
<div style="position: relative;">
    <div id="scroller">
    <ul >
        <li>111111111111</li>
        <li>2222222222</li>
        <li>333333333</li>
        <li>44444444444</li>
        <li>55555555555</li>
        <li>66666666666666</li>
        <li>777777777777</li>
        <li>888888888888888</li>
        <li>9999999999999</li>
    </ul></div>
</div>

</body>
<script src="../js/lib/zepto.min.js?201512122302"></script>
<script src="../js/lib/iscroll.js?201512122302"></script>
<script>
    function loaded ()  {
        var testIScroll = new IScroll('#scroller', {
            mouseWheel: true,
            scrollbars: false,
            click: true,
            interactiveScrollbars: true,
            shrinkScrollbars: 'scale',
            fadeScrollbars: true,
            scrollX: false,
            scrollY: true
        });
        /*    testIScroll.on('scrollEnd', function(){
        if(this.maxScrollY - this.y > 40){
           console.log("down");
        }else{
            console.log("up");
        }
    });*/

        testIScroll.on("scroll", function(){
        var y = this.y,
                maxY = this.maxScrollY - y;
            //downHasClass = downIcon.hasClass("reverse_icon"),
            // upHasClass = upIcon.hasClass("reverse_icon");

        if( y >= 40){
            //!downHasClass && downIcon.addClass("reverse_icon");
            return "";
        } else if(y < 40 && y > 0){
           // downHasClass && downIcon.removeClass("reverse_icon");
            return "";
        }

        if(maxY >= 40){
           // !upHasClass && upIcon.addClass("reverse_icon");
            return "";
        } else if(maxY < 40 && maxY >=0){
           //upHasClass && upIcon.removeClass("reverse_icon");
            return "";
        }
    });

    testIScroll.on("slideDown", function(){
        if(this.y > 40){
            console.log("slideDown");
           // upIcon.removeClass("reverse_icon")
        }
    });

    testIScroll.on("slideUp", function(){
        if(this.maxScrollY - this.y > 40){
            console.log("slideUp");
            //upIcon.removeClass("reverse_icon")
        }
    });
        };

</script>

</html>